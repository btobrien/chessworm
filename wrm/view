#!/bin/bash

flip_file=$1
disp_lock=$2

while read input; do
	while ! mkdir $disp_lock 2>/dev/null; do
		sleep 0.2
	done
	tput cup 0 0
	printf '\n'
	if [ -f "$flip_file" ]; then
		disp <<<"$input" | flip | border | center
	else
		disp <<<"$input" | border | center
	fi
	printf '\n'
	cut -d':' -f2 <<<$input | ./strip | tr '/' '\n' | tee ~/txt/test.txt | tree | center
	tput cup $(tput lines) 0
	cols=$(tput cols)
	pad=%"$cols"s
	printf "$pad"
	rm -r $disp_lock
done

